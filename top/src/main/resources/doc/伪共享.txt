<h3 style="text-align:start;"><span style="color: rgb(102,102,102);background-color: initial;font-size: 20px;font-family: Arial, Helvetica, sans-serif;">伪共享(False Sharing)</span></h3>
<p style="text-align:start;"></p>
<p style="text-align:start;"><span style="color: rgba(0,0,0,0.65);background-color: rgb(255,255,255);font-size: 12px;font-family: Arial, Helvetica, sans-serif;">原文地址：</span><a href="http://ifeve.com/false-sharing/" target="_blank"><span style="color: rgb(16,142,233);background-color: rgb(255,255,255);font-size: 12px;font-family: Arial, Helvetica, sans-serif;">http://ifeve.com/false-sharing/</span></a></p>
<p style="text-align:start;"><span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 14px;font-family: Arial, Helvetica, sans-serif;"><strong>作者</strong>：Martin Thompson  <strong>译者</strong>：丁一</span></p>
<p style="text-align:start;"><span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 14px;font-family: Arial, Helvetica, sans-serif;">缓存系统中是以缓存行（cache line）为单位存储的。缓存行是2的整数幂个连续字节，一般为32-256个字节。最常见的缓存行大小是64个字节。当多线程修改互相独立的变量时，如果这些变量共享同一个缓存行，就会无意中影响彼此的性能，这就是伪共享。缓存行上的写竞争是运行在SMP系统中并行线程实现可伸缩性最重要的限制因素。有人将伪共享描述成无声的性能杀手，因为从代码中很难看清楚是否会出现伪共享。</span></p>
<p style="text-align:start;"><span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 14px;font-family: Arial, Helvetica, sans-serif;">为了让可伸缩性与线程数呈线性关系，就必须确保不会有两个线程往同一个变量或缓存行中写。两个线程写同一个变量可以在代码中发现。为了确定互相独立的变量是否共享了同一个缓存行，就需要了解内存布局，或找个工具告诉我们。Intel VTune就是这样一个分析工具。本文中我将解释Java对象的内存布局以及我们该如何填充缓存行以避免伪共享。</span><br></p>
<img src="http://ifeve.com/wp-content/uploads/2013/01/cache-line.png" alt="cache-line.png" style="float:none;height: auto;width: auto"/>
<p style="text-align:start;"><span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 14px;font-family: Arial, Helvetica, sans-serif;">图1说明了伪共享的问题。在核心1上运行的线程想更新变量X，同时核心2上的线程想要更新变量Y。不幸的是，这两个变量在同一个缓存行中。每个线程都要去竞争缓存行的所有权来更新变量。如果核心1获得了所有权，缓存子系统将会使核心2中对应的缓存行失效。当核心2获得了所有权然后执行更新操作，核心1就要使自己对应的缓存行失效。这会来来回回的经过L3缓存，大大影响了性能。如果互相竞争的核心位于不同的插槽，就要额外横跨插槽连接，问题可能更加严重。</span></p>
<p style="text-align:start;"><a href="http://localhost:8000/" target="_self"><span style="color: rgba(0,0,0,0.65);background-color: transparent;font-size: 18px;font-family: Arial, Helvetica, sans-serif;">Java内存布局(Java Memory Layout)</span></a></p>
<p style="text-align:start;"><span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 14px;font-family: Arial, Helvetica, sans-serif;">对于HotSpot JVM，所有对象都有两个字长的对象头。第一个字是由24位哈希码和8位标志位（如锁的状态或作为锁对象）组成的Mark Word。第二个字是对象所属类的引用。如果是数组对象还需要一个额外的字来存储数组的长度。每个对象的起始地址都对齐于8字节以提高性能。因此当封装对象的时候为了高效率，对象字段声明的顺序会被重排序成下列基于字节大小的顺序：</span></p>
<ol>
<li><span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 14px;font-family: Arial, Helvetica, sans-serif;">doubles (8) 和 longs (8)</span></li>
<li><span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 14px;font-family: Arial, Helvetica, sans-serif;">ints (4) 和 floats (4)</span></li>
<li><span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 14px;font-family: Arial, Helvetica, sans-serif;">shorts (2) 和 chars (2)</span></li>
<li><span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 14px;font-family: Arial, Helvetica, sans-serif;">booleans (1) 和 bytes (1)</span></li>
<li><span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 14px;font-family: Arial, Helvetica, sans-serif;">references (4/8)</span></li>
<li><span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 14px;font-family: Arial, Helvetica, sans-serif;">&lt;子类字段重复上述顺序&gt;</span></li>
</ol>
<p style="text-align:start;"><span style="color: rgba(0,0,0,0.65);background-color: rgb(255,255,255);font-size: 12px;font-family: Arial, Helvetica, sans-serif;">（译注：更多HotSpot虚拟机对象结构相关内容:</span><a href="http://www.infoq.com/cn/articles/jvm-hotspot" target="_blank"><span style="color: rgb(16,142,233);background-color: rgb(255,255,255);font-size: 12px;font-family: Arial, Helvetica, sans-serif;">http://www.infoq.com/cn/articles/jvm-hotspot</span></a><span style="color: rgba(0,0,0,0.65);background-color: rgb(255,255,255);font-size: 12px;font-family: Arial, Helvetica, sans-serif;">）</span></p>
<p style="text-align:start;"><span style="color: rgba(0,0,0,0.65);background-color: rgb(255,255,255);font-size: 12px;font-family: Arial, Helvetica, sans-serif;">了解这些之后就可以在任意字段间用7个long来填充缓存行。在</span><a href="http://code.google.com/p/disruptor/" target="_blank"><span style="color: rgb(16,142,233);background-color: rgb(255,255,255);font-size: 12px;font-family: Arial, Helvetica, sans-serif;">Disruptor</span></a><span style="color: rgba(0,0,0,0.65);background-color: rgb(255,255,255);font-size: 12px;font-family: Arial, Helvetica, sans-serif;">里我们对</span><a href="http://code.google.com/p/disruptor/source/browse/trunk/code/src/main/com/lmax/disruptor/RingBuffer.java" target="_blank"><span style="color: rgb(16,142,233);background-color: rgb(255,255,255);font-size: 12px;font-family: Arial, Helvetica, sans-serif;">RingBuffer</span></a><span style="color: rgba(0,0,0,0.65);background-color: rgb(255,255,255);font-size: 12px;font-family: Arial, Helvetica, sans-serif;">的cursor和</span><a href="http://code.google.com/p/disruptor/source/browse/trunk/code/src/main/com/lmax/disruptor/BatchEventProcessor.java" target="_blank"><span style="color: rgb(16,142,233);background-color: rgb(255,255,255);font-size: 12px;font-family: Arial, Helvetica, sans-serif;">BatchEventProcessor</span></a><span style="color: rgba(0,0,0,0.65);background-color: rgb(255,255,255);font-size: 12px;font-family: Arial, Helvetica, sans-serif;">的序列进行了缓存行填充。</span></p>
<p style="text-align:start;"><span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 14px;font-family: Arial, Helvetica, sans-serif;">为了展示其性能影响，我们启动几个线程，每个都更新它自己独立的计数器。计数器是volatile long类型的，所以其它线程能看到它们的进展。</span></p>
<p style="text-align:left;"></p>
<p style="text-align:left;"></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>01</code></span><span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>public</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>final</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>class</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>FalseSharing</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>02</code></span> <span style="color: rgb(0,0,0);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>implements</code></span> <span style="color: rgb(0,0,0);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>Runnable</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>03</code></span><span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>{</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>04</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>public</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>final</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>static</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>int</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>NUM_THREADS =</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>4;</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>// change</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 14px;font-family: Arial, Helvetica, sans-serif;"><code>05</code></span> <span style="color: rgb(0,0,0);background-color: initial;font-size: 14px;font-family: Arial, Helvetica, sans-serif;"><code>public</code></span> <span style="color: rgb(0,0,0);background-color: initial;font-size: 14px;font-family: Arial, Helvetica, sans-serif;"><code>final</code></span> <span style="color: rgb(0,0,0);background-color: initial;font-size: 14px;font-family: Arial, Helvetica, sans-serif;"><code>static</code></span> <span style="color: rgb(0,0,0);background-color: initial;font-size: 14px;font-family: Arial, Helvetica, sans-serif;"><code>long</code></span> <span style="color: rgb(0,0,0);background-color: initial;font-size: 14px;font-family: Arial, Helvetica, sans-serif;"><code>ITERATIONS = 500L * 1000L * 1000L;</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>06</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>private</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>final</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>int</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>arrayIndex;</code></span></p>
<p style="text-align:left;"><span style="color: rgb(102,102,102);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>07</code></span>&nbsp;</p>
<p style="text-align:left;"><span style="color: rgb(102,102,102);background-color: initial;font-size: 14px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>08</code></span> <span style="color: rgb(102,102,102);background-color: initial;font-size: 14px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>private</code></span> <span style="color: rgb(102,102,102);background-color: initial;font-size: 14px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>static</code></span> <span style="color: rgb(102,102,102);background-color: initial;font-size: 14px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>VolatileLong[] longs =</code></span> <span style="color: rgb(102,102,102);background-color: initial;font-size: 14px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>new</code></span> <span style="color: rgb(102,102,102);background-color: initial;font-size: 14px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>VolatileLong[NUM_THREADS];</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>09</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>static</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>10</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>{</code></span></p>
<p style="text-align:left;"><span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>11</code></span> <span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>for</code></span> <span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>(int</code></span> <span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>i =</code></span> <span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>0; i &lt; longs.length; i++)</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>12</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>{</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>13</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>longs[i] =</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>new</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>VolatileLong();</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>14</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>}</code></span></p>
<p style="text-align:left;"><span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 12px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>15</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 12px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>}</code></span></p>
<p style="text-align:left;"><span style="color: rgb(102,102,102);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>16</code></span>&nbsp;</p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>17</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>public</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>FalseSharing(final</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>int</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>arrayIndex)</code></span></p>
<p style="text-align:left;"><span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 12px;font-family: Arial, Helvetica, sans-serif;"><code>18</code></span> <span style="color: rgb(0,0,0);background-color: initial;font-size: 12px;font-family: Arial, Helvetica, sans-serif;"><code>{</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>19</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>this.arrayIndex = arrayIndex;</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>20</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>}</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 14px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>21</code></span>&nbsp;</p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>22</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>public</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>static</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>void</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>main(final</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>String[] args)</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>throws</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>Exception</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>23</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>{</code></span></p>
<p style="text-align:left;"><span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>24</code></span> <span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>final</code></span> <span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>long</code></span> <span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>start = System.nanoTime();</code></span></p>
<p style="text-align:left;"><span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 12px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>25</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 12px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>runTest();</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>26</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>System.out.println("duration = "</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>+ (System.nanoTime() - start));</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>27</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>}</code></span></p>
<p style="text-align:left;"><span style="color: rgb(102,102,102);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>28</code></span>&nbsp;</p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>29</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>private</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>static</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>void</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>runTest()</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>throws</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>InterruptedException</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 12px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>30</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 12px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>{</code></span></p>
<p style="text-align:left;"><span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 12px;font-family: Arial, Helvetica, sans-serif;"><code>31</code></span> <span style="color: rgb(0,0,0);background-color: initial;font-size: 12px;font-family: Arial, Helvetica, sans-serif;"><code>Thread[] threads =</code></span> <span style="color: rgb(0,0,0);background-color: initial;font-size: 12px;font-family: Arial, Helvetica, sans-serif;"><code>new</code></span> <span style="color: rgb(0,0,0);background-color: initial;font-size: 12px;font-family: Arial, Helvetica, sans-serif;"><code>Thread[NUM_THREADS];</code></span></p>
<p style="text-align:left;"><span style="color: rgb(102,102,102);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>32</code></span>&nbsp;</p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>33</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>for</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>(int</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>i =</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>0; i &lt; threads.length; i++)</code></span></p>
<p style="text-align:left;"><span style="color: rgb(102,102,102);background-color: initial;font-size: 14px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>34</code></span> <span style="color: rgb(102,102,102);background-color: initial;font-size: 14px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>{</code></span></p>
<p style="text-align:left;"><span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 12px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>35</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 12px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>threads[i] =</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 12px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>new</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 12px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>Thread(new</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 12px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>FalseSharing(i));</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>36</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>}</code></span></p>
<p style="text-align:left;"><span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>37</code></span>&nbsp;</p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>38</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>for</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>(Thread t : threads)</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>39</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>{</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 12px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>40</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 12px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>t.start();</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>41</code></span> <span style="color: rgb(0,0,0);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>}</code></span></p>
<p style="text-align:left;"><span style="color: rgb(102,102,102);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>42</code></span>&nbsp;</p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>43</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>for</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>(Thread t : threads)</code></span></p>
<p style="text-align:left;"><span style="color: rgba(0,0,0,0.65);background-color: rgb(255,255,255);font-size: 14px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>44</code></span> <span style="color: rgba(0,0,0,0.65);background-color: rgb(255,255,255);font-size: 14px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>{</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>45</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>t.join();</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>46</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>}</code></span></p>
<p style="text-align:left;"><span style="color: rgb(102,102,102);background-color: initial;font-size: 14px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>47</code></span> <span style="color: rgb(102,102,102);background-color: initial;font-size: 14px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>}</code></span></p>
<p style="text-align:left;"><span style="color: rgb(102,102,102);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>48</code></span>&nbsp;</p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>49</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>public</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>void</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>run()</code></span></p>
<p style="text-align:left;"><span style="color: rgb(102,102,102);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>50</code></span> <span style="color: rgb(102,102,102);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>{</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 12px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>51</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 12px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>long</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 12px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>i = ITERATIONS +</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 12px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>1;</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>52</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>while</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>(0</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>!= --i)</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>53</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>{</code></span></p>
<p style="text-align:left;"><span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>54</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>longs[arrayIndex].value = i;</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>55</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>}</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>56</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>}</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 14px;font-family: Arial, Helvetica, sans-serif;"><code>57</code></span>&nbsp;</p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 12px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>58</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 12px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>public</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 12px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>final</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 12px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>static</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 12px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>class</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 12px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>VolatileLong</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>59</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>{</code></span></p>
<p style="text-align:left;"><span style="color: rgb(102,102,102);background-color: initial;font-size: 14px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>60</code></span> <span style="color: rgb(102,102,102);background-color: initial;font-size: 14px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>public</code></span> <span style="color: rgb(102,102,102);background-color: initial;font-size: 14px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>volatile</code></span> <span style="color: rgb(102,102,102);background-color: initial;font-size: 14px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>long</code></span> <span style="color: rgb(102,102,102);background-color: initial;font-size: 14px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>value = 0L;</code></span></p>
<p style="text-align:left;"><span style="color: rgb(120,120,120);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>61</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>public</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>long</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>p1, p2, p3, p4, p5, p6;</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>// comment out</code></span></p>
<p style="text-align:left;"><span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>62</code></span> <span style="color: rgba(0,0,0,0.65);background-color: initial;font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>}</code></span></p>
<p style="text-align:left;"><span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 1px;font-family: "Helvetica Neue For Number", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;"><code>63}</code></span></p>
<p style="text-align:start;"><a href="http://localhost:8000/" target="_self"><span style="color: rgb(0,161,158);background-color: rgb(255,255,255);font-size: 18px;font-family: Arial, Helvetica, sans-serif;">结果(Results)</span></a></p>
<p style="text-align:start;"><span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 14px;font-family: Arial, Helvetica, sans-serif;">运行上面的代码，增加线程数以及添加/移除缓存行的填充，下面的图2描述了我得到的结果。这是在我4核Nehalem上测得的运行时间。</span></p>
<img src="http://ifeve.com/wp-content/uploads/2013/01/duration.png" alt="duration.png" style="float:none;height: auto;width: auto"/>
<p style="text-align:start;"><span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 14px;font-family: Arial, Helvetica, sans-serif;">从不断上升的测试所需时间中能够明显看出伪共享的影响。没有缓存行竞争时，我们几近达到了随着线程数的线性扩展。</span></p>
<p style="text-align:start;"><span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 14px;font-family: Arial, Helvetica, sans-serif;">这并不是个完美的测试，因为我们不能确定这些VolatileLong会布局在内存的什么位置。它们是独立的对象。但是经验告诉我们同一时间分配的对象趋向集中于一块。</span></p>
<p style="text-align:start;"><span style="color: rgb(102,102,102);background-color: rgb(255,255,255);font-size: 14px;font-family: Arial, Helvetica, sans-serif;">所以你也看到了，伪共享可能是无声的性能杀手。</span></p>
<p style="text-align:start;"><span style="color: rgba(0,0,0,0.65);background-color: rgb(255,255,255);font-size: 12px;font-family: Arial, Helvetica, sans-serif;">注意：更多伪共享相关的内容，请阅读我后续</span><a href="https://tudaili.com/browse.php?u=yXWqHyY%2FZVlpgmBI08XOsXrJV8eow%2BqqkWG54ZwvNsKT6zU7ePdZLDuEpk8cH60vo8vrNvX%2Bq5zjAFtrFq0zY7jqMqu2&b=6" target="_blank"><span style="color: rgb(16,142,233);background-color: rgb(255,255,255);font-size: 12px;font-family: Arial, Helvetica, sans-serif;">blog</span></a><span style="color: rgba(0,0,0,0.65);background-color: rgb(255,255,255);font-size: 12px;font-family: Arial, Helvetica, sans-serif;">。</span></p>
<p style="text-align:start;"></p>
<p style="text-align:start;"><span style="color: rgba(0,0,0,0.65);background-color: rgb(255,255,255);font-size: 12px;font-family: Arial, Helvetica, sans-serif;"><strong>原创文章，转载请注明：</strong></span> <span style="color: rgba(0,0,0,0.65);background-color: rgb(255,255,255);font-size: 12px;font-family: Arial, Helvetica, sans-serif;">转载自</span><a href="http://ifeve.com/" target="_self"><span style="color: rgb(0,161,158);background-color: rgb(255,255,255);font-size: 12px;font-family: Arial, Helvetica, sans-serif;">并发编程网 – ifeve.com</span></a><span style="color: rgba(0,0,0,0.65);background-color: rgb(255,255,255);font-size: 12px;font-family: Arial, Helvetica, sans-serif;"><strong>本文链接地址:</strong></span> <a href="http://ifeve.com/falsesharing/" target="_self"><span style="color: rgb(0,161,158);background-color: rgb(255,255,255);font-size: 12px;font-family: Arial, Helvetica, sans-serif;">伪共享(False Sharing)</span></a>&nbsp;&nbsp;</p>
